<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cabinet Business Management System - Phase 3</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    
    <!-- Phase 3 Configuration System -->
    <script src="enhanced-config-phase3.js"></script>
    
    <style>
        :root {
            --primary-gold: #D4B062;
            --light-gold: #F4E4A1;
            --cream: #FBF8F0;
            --warm-white: #FEFCF7;
            --charcoal: #2C2C2C;
            --dark-gray: #4A4A4A;
            --light-gray: #E8E8E8;
            --success: #2E7D4A;
            --warning: #C5801A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--warm-white) 0%, var(--cream) 100%);
            color: var(--charcoal);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-gold), #C5A055);
            color: white;
            padding: 3rem 0;
            text-align: center;
            margin-bottom: 3rem;
            border-radius: 16px;
        }

        .company-logo {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .company-name {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .company-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .company-tagline {
            font-size: 1.1rem;
            font-style: italic;
            opacity: 0.8;
        }

        /* System Overview */
        .system-overview {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            text-align: center;
        }

        .overview-title {
            font-size: 2rem;
            color: var(--charcoal);
            margin-bottom: 1rem;
        }

        .overview-description {
            font-size: 1.1rem;
            color: var(--dark-gray);
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--cream);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid var(--primary-gold);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 0.5rem;
        }

        .feature-description {
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        /* Navigation Cards */
        .nav-section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--charcoal);
            margin-bottom: 2rem;
            text-align: center;
            font-weight: 600;
        }

        .nav-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .nav-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 6px solid var(--primary-gold);
        }

        .nav-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(212, 176, 98, 0.2);
        }

        .nav-card.primary {
            border-left-color: var(--primary-gold);
        }

        .nav-card.success {
            border-left-color: var(--success);
        }

        .nav-card.warning {
            border-left-color: var(--warning);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-icon {
            font-size: 2rem;
            margin-right: 1rem;
            opacity: 0.8;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--charcoal);
        }

        .card-description {
            color: var(--dark-gray);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .card-features {
            margin-bottom: 1.5rem;
        }

        .card-features ul {
            list-style: none;
            padding: 0;
        }

        .card-features li {
            color: var(--dark-gray);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .card-features li::before {
            content: "✅ ";
            margin-right: 0.5rem;
        }

        .card-button {
            background: var(--primary-gold);
            color: white;
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            width: 100%;
            text-align: center;
        }

        .card-button:hover {
            background: #C5A055;
            transform: translateY(-2px);
        }

        .card-button.success {
            background: var(--success);
        }

        .card-button.success:hover {
            background: #246B3A;
        }

        .card-button.warning {
            background: var(--warning);
        }

        .card-button.warning:hover {
            background: #A66C15;
        }

        /* Business Configuration Switcher */
        .config-switcher {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            text-align: center;
        }

        .config-title {
            font-size: 1.3rem;
            color: var(--charcoal);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .config-description {
            color: var(--dark-gray);
            margin-bottom: 2rem;
        }

        .config-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .config-btn {
            background: var(--light-gray);
            border: none;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--dark-gray);
            font-weight: 500;
        }

        .config-btn:hover {
            background: var(--light-gold);
        }

        .config-btn.active {
            background: var(--primary-gold);
            color: white;
        }

        /* Footer */
        .footer {
            background: var(--charcoal);
            color: white;
            text-align: center;
            padding: 2rem;
            border-radius: 16px;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .nav-cards {
                grid-template-columns: 1fr;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .config-buttons {
                grid-template-columns: 1fr;
            }

            .company-name {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="company-logo" id="company-logo">🪵</div>
            <h1 class="company-name" id="company-name">Cabinet Business Management System</h1>
            <p class="company-subtitle" id="company-subtitle">Phase 3 - Advanced CRM & Automation Platform</p>
            <p class="company-tagline" id="company-tagline">Drive Growth. Automate Success. Lead Your Market.</p>
        </header>

        <!-- System Overview -->
        <section class="system-overview">
            <h2 class="overview-title">Revolutionary Business Management</h2>
            <p class="overview-description">
                Transform your cabinet business with the industry's most advanced CRM system. 
                Featuring intelligent lead management, automated email sequences, real-time analytics, 
                and integrated payment processing - all optimized for mobile and designed to convert prospects into customers.
            </p>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h3 class="feature-title">Smart Configurator</h3>
                    <p class="feature-description">Interactive estimate tool with real-time pricing and PDF generation</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">👥</div>
                    <h3 class="feature-title">CRM System</h3>
                    <p class="feature-description">Complete lead management with automated scoring and follow-up</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <h3 class="feature-title">Business Analytics</h3>
                    <p class="feature-description">Real-time dashboards with conversion tracking and performance insights</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">📧</div>
                    <h3 class="feature-title">Email Automation</h3>
                    <p class="feature-description">Branded email sequences with welcome, follow-up, and reminder campaigns</p>
                </div>
            </div>
        </section>

        <!-- Business Configuration -->
        <section class="config-switcher">
            <h2 class="config-title">Business Configuration</h2>
            <p class="config-description">
                Switch between different business brands and pricing configurations instantly. 
                Perfect for multiple markets or testing different positioning strategies.
            </p>
            
            <div class="config-buttons">
                <button class="config-btn active" id="btn-foundry_cabinets" onclick="switchConfig('foundry_cabinets')">
                    🪵 Foundry Cabinets Co
                </button>
            </div>
        </section>

        <!-- Phase 3 - Advanced CRM Features -->
        <section class="nav-section">
            <h2 class="section-title">Phase 3 - Advanced CRM System</h2>
            <div class="nav-cards">
                <div class="nav-card primary">
                    <div class="card-header">
                        <span class="card-icon">📋</span>
                        <h3 class="card-title">Smart Configurator</h3>
                    </div>
                    <p class="card-description">
                        Revolutionary 4-step configurator with CRM integration, email automation, 
                        and payment processing. Create professional proposals in minutes.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Real-time pricing with market intelligence</li>
                            <li>Automatic lead capture and scoring</li>
                            <li>PDF proposal generation</li>
                            <li>Stripe payment integration</li>
                            <li>Mobile-optimized experience</li>
                        </ul>
                    </div>
                    <a href="client-proposal-phase3.html" class="card-button">
                        Launch Smart Configurator
                    </a>
                </div>

                <div class="nav-card success">
                    <div class="card-header">
                        <span class="card-icon">👥</span>
                        <h3 class="card-title">CRM Dashboard</h3>
                    </div>
                    <p class="card-description">
                        Comprehensive lead management system with activity tracking, 
                        email automation, and pipeline management.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Complete lead lifecycle management</li>
                            <li>Email template system</li>
                            <li>Follow-up scheduling</li>
                            <li>Activity timeline tracking</li>
                            <li>Performance metrics</li>
                        </ul>
                    </div>
                    <a href="crm-dashboard.html" class="card-button success">
                        Open CRM Dashboard
                    </a>
                </div>

                <div class="nav-card warning">
                    <div class="card-header">
                        <span class="card-icon">📈</span>
                        <h3 class="card-title">Analytics Dashboard</h3>
                    </div>
                    <p class="card-description">
                        Real-time business intelligence with conversion tracking, 
                        revenue analytics, and performance insights.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Live KPI monitoring</li>
                            <li>Lead conversion funnel</li>
                            <li>Revenue trend analysis</li>
                            <li>Email performance tracking</li>
                            <li>Actionable business insights</li>
                        </ul>
                    </div>
                    <a href="analytics-dashboard.html" class="card-button warning">
                        View Analytics
                    </a>
                </div>
            </div>
        </section>

        <!-- Phase 2 - Enhanced Features -->
        <section class="nav-section">
            <h2 class="section-title">Phase 2 - Enhanced Features</h2>
            <div class="nav-cards">
                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">📱</span>
                        <h3 class="card-title">Client Portal</h3>
                    </div>
                    <p class="card-description">
                        Dedicated client portal with project tracking, photo uploads, 
                        and communication tools.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Project timeline visualization</li>
                            <li>Photo upload capabilities</li>
                            <li>Message communication</li>
                            <li>Document downloads</li>
                        </ul>
                    </div>
                    <a href="client-portal.html" class="card-button">
                        Access Client Portal
                    </a>
                </div>

                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">📸</span>
                        <h3 class="card-title">Photo Gallery</h3>
                    </div>
                    <p class="card-description">
                        Advanced photo gallery system with lightbox navigation, 
                        slideshow mode, and mobile optimization.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Professional lightbox display</li>
                            <li>Keyboard and touch navigation</li>
                            <li>Zoom and slideshow features</li>
                            <li>Mobile swipe controls</li>
                        </ul>
                    </div>
                    <a href="multi-photo-gallery.html" class="card-button">
                        View Photo Gallery
                    </a>
                </div>

                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">🔄</span>
                        <h3 class="card-title">Before/After Showcase</h3>
                    </div>
                    <p class="card-description">
                        Interactive before/after comparison sliders that showcase 
                        your transformation projects.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Touch-friendly comparison sliders</li>
                            <li>Multiple project showcases</li>
                            <li>Auto-play presentation mode</li>
                            <li>Mobile-optimized controls</li>
                        </ul>
                    </div>
                    <a href="before-after-showcase.html" class="card-button">
                        View Showcases
                    </a>
                </div>
            </div>
        </section>

        <!-- Administration -->
        <section class="nav-section">
            <h2 class="section-title">Administration & Tools</h2>
            <div class="nav-cards">
                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">⚙️</span>
                        <h3 class="card-title">Admin Dashboard</h3>
                    </div>
                    <p class="card-description">
                        Administrative interface for managing projects, 
                        configurations, and system settings.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Project management interface</li>
                            <li>System configuration</li>
                            <li>User management tools</li>
                            <li>Performance monitoring</li>
                        </ul>
                    </div>
                    <a href="admin-dashboard.html" class="card-button">
                        Admin Dashboard
                    </a>
                </div>

                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">🎭</span>
                        <h3 class="card-title">Demo Center</h3>
                    </div>
                    <p class="card-description">
                        Interactive demonstration of all system features 
                        and business configurations.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Feature demonstrations</li>
                            <li>Configuration testing</li>
                            <li>Training materials</li>
                            <li>Best practices guide</li>
                        </ul>
                    </div>
                    <a href="demo.html" class="card-button">
                        Launch Demo
                    </a>
                </div>

                <div class="nav-card">
                    <div class="card-header">
                        <span class="card-icon">🌐</span>
                        <h3 class="card-title">Virtual Tours</h3>
                    </div>
                    <p class="card-description">
                        360° virtual project tours with interactive hotspots 
                        and detailed project information.
                    </p>
                    <div class="card-features">
                        <ul>
                            <li>Immersive panoramic viewing</li>
                            <li>Interactive hotspot annotations</li>
                            <li>VR-ready experience</li>
                            <li>Mobile and desktop support</li>
                        </ul>
                    </div>
                    <a href="360-project-viewer.html" class="card-button">
                        Take Virtual Tour
                    </a>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3 id="footer-company-name">Cabinet Business Management System</h3>
            <p>Phase 3 - Professional CRM and automation platform designed for cabinet businesses.</p>
            <p style="margin-top: 1rem; opacity: 0.8;">
                &copy; 2025 | World-Class Technology | Industry Leadership
            </p>
        </div>
    </footer>

    <script>
        // Apply configuration on page load with error handling
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Wait for config to load
                setTimeout(() => {
                    try {
                        applyConfiguration();
                        updateMetrics();
                        
                        // Track page view with error handling
                        if (typeof window.scoreInteraction === 'function') {
                            try {
                                window.scoreInteraction('page_view', 1);
                            } catch (scoreError) {
                                console.warn('⚠️ Score interaction error (browser extension conflict):', scoreError);
                            }
                        }
                        if (typeof window.trackEvent === 'function') {
                            try {
                                window.trackEvent('hub_page_view', { 
                                    page: 'business_hub_phase3',
                                    timestamp: new Date().toISOString()
                                });
                            } catch (trackError) {
                                console.warn('⚠️ Event tracking error (browser extension conflict):', trackError);
                            }
                        }
                    } catch (initError) {
                        console.warn('⚠️ Page initialization error (browser extension conflict):', initError);
                        // Try to at least apply configuration even if tracking fails
                        try {
                            applyConfiguration();
                        } catch (configError) {
                            console.warn('⚠️ Configuration fallback error:', configError);
                        }
                    }
                }, 100);
            } catch (domError) {
                console.warn('⚠️ DOM event listener error (browser extension conflict):', domError);
            }
        });

        function applyConfiguration() {
            if (typeof window.configManager !== 'undefined' && window.BUSINESS_CONFIGS) {
                const config = window.BUSINESS_CONFIGS[window.configManager.currentConfig];
                if (config) {
                    // Update header
                    document.getElementById('company-logo').textContent = config.logo || '🪵';
                    document.getElementById('company-name').textContent = config.companyName || 'Cabinet Business System';
                    document.getElementById('company-subtitle').textContent = 'Phase 3 - ' + (config.companySubtitle || 'Business Management Platform');
                    document.getElementById('company-tagline').textContent = config.companyTagline || 'Drive Growth. Automate Success.';
                    
                    // Update footer
                    document.getElementById('footer-company-name').textContent = config.companyName || 'Cabinet Business System';
                    
                    // Update page title
                    document.title = config.companyName + ' - Business Management System Phase 3';
                    
                    console.log('✅ Configuration applied:', config.companyName);
                } else {
                    console.log('⚠️ Using default configuration');
                }
            } else {
                console.log('⏳ Configuration system still loading...');
                // Retry after a short delay
                setTimeout(applyConfiguration, 500);
            }
        }

        // Update system metrics display
        function updateMetrics() {
            try {
                // This would show real metrics in a production system
                const leadScore = localStorage.getItem('leadScore') || '0';
                const events = JSON.parse(localStorage.getItem('analyticsEvents') || '[]');
                
                console.log('📊 System Metrics:');
                console.log('- Lead Score:', leadScore);
                console.log('- Total Events:', events.length);
                console.log('- Configuration:', window.configManager?.currentConfig || 'unknown');
            } catch (error) {
                console.warn('⚠️ Could not update metrics:', error);
            }
        }

        // Configuration switching function with error handling
        function switchConfig(configName) {
            try {
                if (typeof window.switchConfig === 'function') {
                    window.switchConfig(configName);
                    // Reapply configuration to this page
                    setTimeout(() => {
                        try {
                            applyConfiguration();
                            updateMetrics();
                        } catch (reapplyError) {
                            console.warn('⚠️ Configuration reapply error:', reapplyError);
                        }
                    }, 100);
                    
                    // Track configuration change
                    if (typeof window.trackEvent === 'function') {
                        try {
                            window.trackEvent('config_changed', { 
                                new_config: configName,
                                source: 'business_hub'
                            });
                        } catch (trackError) {
                            console.warn('⚠️ Config change tracking error (browser extension conflict):', trackError);
                        }
                    }
                } else {
                    console.log('Configuration switching not available yet');
                }
            } catch (error) {
                console.warn('⚠️ Configuration switching error (browser extension conflict):', error);
            }
        }
    </script>
</body>
</html>
